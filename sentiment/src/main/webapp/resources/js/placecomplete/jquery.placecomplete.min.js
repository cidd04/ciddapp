!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"function"==typeof require&&require("select2");var t="placecomplete",i={placeholderText:"City, State, Country",requestParams:{types:["(cities)"]}};window.initPlacecomplete=function(){n.completeInit()};var n={deferred:new e.Deferred,initialized:!1,acService:null,pService:null,el:null,init:function(t){this.initialized||(this.el=t,window.google&&google.maps&&google.maps.places?this.completeInit():e.ajax({url:"https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&callback=initPlacecomplete",dataType:"script",cache:!0}))},completeInit:function(){this.acService=new google.maps.places.AutocompleteService,this.pService=new google.maps.places.PlacesService(this.el),this.initialized=!0,this.deferred.resolve()},_handlePredictions:function(e,t,i){return i!==google.maps.places.PlacesServiceStatus.OK?void e.reject(i):void e.resolve(t)},_handleDetails:function(e,t,i,n){return n!==google.maps.places.PlacesServiceStatus.OK?void e.reject(n):(i.display_text=t,void e.resolve(i))},getPredictions:function(t,i){return this.deferred.then(e.proxy(function(){var n=new e.Deferred;return i=e.extend({},i,{input:t}),this.acService.getPlacePredictions(i,e.proxy(this._handlePredictions,null,n)),n.promise()},this))},getDetails:function(t){return this.deferred.then(e.proxy(function(){var i=new e.Deferred,n=t.description;return this.pService.getDetails({reference:t.reference},e.proxy(this._handleDetails,null,i,n)),i.promise()},this))}},r=function(r,o){this.element=r,n.init(r),this.options=e.extend({},i,o),this._defaults=i,this._name=t,this.init()};r.prototype.init=function(){var i=e(this.element),r=this.options.requestParams,o=e.extend({},{query:function(o){n.getPredictions(o.term,r).done(function(t){var i=e.map(t,function(e){return e.text=e.description,e});o.callback({results:i})}).fail(function(e){i.trigger(t+":error",e),o.callback({results:[]})})},initSelection:function(e,t){var n=i.val();t({id:0,text:n})},minimumInputLength:1,selectOnBlur:!0,allowClear:!0,multiple:!1,dropdownCssClass:"jquery-placecomplete-google-attribution",placeholder:this.options.placeholderText},this.options);i.select2(o),i.on({"select2-removed":function(e){i.trigger(t+":cleared")},change:function(e){e.added&&n.getDetails(e.added).done(function(e){i.trigger(t+":selected",e)}).fail(function(e){i.trigger(t+":error",e)})}})},e.fn[t]=function(i){return this.each(function(){e.data(this,"plugin_"+t)||e.data(this,"plugin_"+t,new r(this,i))})}});